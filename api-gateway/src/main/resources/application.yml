server:
  port: 8080

spring:
  application:
    name: api-gateway
  cloud:
    gateway:
      globalcors:
        cors-configurations:
          '[/**]':
            allowedOrigins: "${CORS_ALLOWED_ORIGINS:http://localhost:3000}"
            allowedMethods: "*"
            allowedHeaders: "*"
            allowCredentials: true

      routes:
        # 1. Auth Service
        - id: auth-service
          uri: ${AUTH_SERVICE_URL:http://localhost:8081}
          predicates:
            - Path=/auth/**

        # 2. Event Service
        - id: event-service
          uri: ${EVENT_SERVICE_URL:http://localhost:8082}
          predicates:
            - Path=/events/**

        # 3. Booking Service
        - id: booking-service
          uri: ${BOOKING_SERVICE_URL:http://localhost:8083}
          predicates:
            - Path=/bookings/**

        # 4. Payment Service
        - id: payment-service
          uri: ${PAYMENT_SERVICE_URL:http://localhost:8084}
          predicates:
            - Path=/payments/**

        # 5. User Service
        - id: user-service
          uri: ${USER_SERVICE_URL:http://localhost:8085}
          predicates:
            - Path=/users/**

        # 6. Notification Service
        - id: notification-service
          uri: ${NOTIFICATION_SERVICE_URL:http://localhost:8086}
          predicates:
            - Path=/notifications/**

management:
  tracing:
    sampling:
      probability: 1.0
  zipkin:
    tracing:
      endpoint: "${ZIPKIN_ENDPOINT:http://localhost:9411/api/v2/spans}"
  propagation:
    type: [ "w3c", "b3" ]

jwt:
  secret: "404E635266556A586E3272357538782F413F4428472B4B6250645367566B59703373367639792F423F4528482B4D6251655468576D5A7134743777217A25432A"
  expiration: 86400000
